<claude-md-template>

<purpose>
Template for generating CLAUDE.md - the project's AI context file that persists knowledge across sessions.
This file is the primary interface between Claude and the project.
</purpose>

<generation_triggers>
- Initial: /sensei:new-project (skeleton version)
- Updates: After each /sensei:execute-phase (via extract-knowledge)
- Brownfield: /sensei:map-codebase (populates from analysis)
- Manual: /sensei:refresh-context
</generation_triggers>

<template>
# CLAUDE.md - Project Context

<!--
  AUTO-GENERATED by BuildSensei v{version}
  Last updated: {timestamp}
  Current phase: {current_phase}

  This file persists project knowledge across sessions.
  Manual edits are preserved - add USER_EDITED: true below to protect sections.
-->

## Project Overview

{project_name}: {project_description}

**Core Value:** {core_value}

## Tech Stack

| Layer | Technology | Notes |
|-------|------------|-------|
| Frontend | {frontend_tech} | {frontend_notes} |
| Backend | {backend_tech} | {backend_notes} |
| Database | {database_tech} | {database_notes} |
| Hosting | {hosting_tech} | {hosting_notes} |

## File Structure

```
{project_root}/
├── src/
│   ├── {structure_details}
├── tests/
├── .planning/          # BuildSensei execution artifacts
└── {additional_structure}
```

## Key Decisions

| Decision | Choice | Rationale | Phase |
|----------|--------|-----------|-------|
{decisions_table}

## Naming Conventions

- **Components:** {component_naming}
- **Functions:** {function_naming}
- **Files:** {file_naming}
- **Variables:** {variable_naming}
- **Constants:** {constant_naming}

## Do Not

{do_not_list}

## Gotchas Discovered

<!-- Accumulated from phase executions - things that broke and how to avoid -->

{gotchas_list}

## Patterns Discovered

<!-- Reusable patterns found during implementation -->

{patterns_list}

## Key Files

<!-- Important files and their purposes -->

| File | Purpose | Phase Added |
|------|---------|-------------|
{key_files_table}

## Agent Responsibilities

{agent_responsibilities}

## Current Sprint Context

**Current Phase:** {current_phase_name}
**Focus:** {current_focus}
**Blockers:** {current_blockers}

## Session Continuity

**Last Session:** {last_session_date}
**Completed:** {last_completed}
**Next Up:** {next_action}

---
<!-- METADATA - Do not edit below this line -->
<!--
  buildsensei_version: {version}
  user_edited: {user_edited}
  generation_count: {generation_count}
  phases_incorporated: [{phases_list}]
-->
</template>

<section_update_rules>
## How Each Section Gets Updated

| Section | Source | Update Frequency |
|---------|--------|------------------|
| Project Overview | PROJECT.md | Once (new-project) |
| Tech Stack | User answers / map-codebase | Once + brownfield |
| File Structure | map-codebase / discoveries | Incremental |
| Key Decisions | SUMMARY.md decisions | After each phase |
| Naming Conventions | CONVENTIONS.md / discovered | Brownfield + discoveries |
| Do Not | PROJECT.md constraints | Once + additions |
| Gotchas Discovered | SUMMARY.md deviations | After each phase (append) |
| Patterns Discovered | extract-knowledge analysis | After each phase (append) |
| Key Files | SUMMARY.md files_modified | After each phase (append) |
| Agent Responsibilities | agents.md | After complete-milestone |
| Current Sprint Context | STATE.md | After each phase |
| Session Continuity | STATE.md / SESSION.md | Each session |
</section_update_rules>

<skeleton_version>
## Skeleton (Generated at new-project)

Only these sections are populated initially:
- Project Overview (from PROJECT.md)
- Tech Stack (from user answers, may be incomplete)
- Do Not (from constraints)
- Current Sprint Context (Phase 1 pending)

All other sections show: "<!-- Will be populated as project builds -->"
</skeleton_version>

</claude-md-template>
