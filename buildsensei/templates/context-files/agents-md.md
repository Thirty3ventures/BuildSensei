<agents-md-template>

<purpose>
Template for generating agents.md - defines project-specific AI agents and their roles.
This helps users understand how to leverage different agents for their project.
</purpose>

<generation_triggers>
- Initial: /sensei:complete-milestone (first generation)
- Manual: /sensei:generate-agents
- Updates: When new agent patterns discovered
</generation_triggers>

<template>
# agents.md - Your AI Team

<!--
  AUTO-GENERATED by BuildSensei v{version}
  Last updated: {timestamp}

  This file defines the AI agents available for your project.
  Each agent has specific responsibilities and context.
-->

## Overview

Your project has access to the following specialized agents:

| Agent | Purpose | Best For |
|-------|---------|----------|
{agents_summary_table}

---

## Core Agents

### @code-agent

**Purpose:** Builds features, fixes bugs, refactors code

**Context Provided:**
- CLAUDE.md (project overview)
- spec.md (what we're building)
- Relevant source files

**Tools Available:**
- Read/write code files
- Run tests
- Create new files/folders
- Git operations

**Instructions:**
- Follow naming conventions in CLAUDE.md
- Write tests alongside features
- Ask before adding new dependencies
- Comment complex logic
- Respect "Do Not" boundaries

**Trigger:**
```
@code-agent, build the {feature} feature
@code-agent, fix the {bug} in {file}
@code-agent, refactor {component} for better performance
```

---

### @test-agent

**Purpose:** Writes unit tests, integration tests, E2E tests

**Context Provided:**
- CLAUDE.md (project patterns)
- Existing test files
- Source files to test

**Tools Available:**
- Read source files
- Write test files
- Run test suite
- Check coverage

**Instructions:**
- Match existing test patterns
- Aim for 80%+ coverage on new code
- Test edge cases and error paths
- Use descriptive test names

**Trigger:**
```
@test-agent, write tests for {component}
@test-agent, add integration tests for {feature}
@test-agent, improve coverage for {file}
```

---

### @docs-agent

**Purpose:** Writes documentation, README, API docs, comments

**Context Provided:**
- CLAUDE.md (project overview)
- spec.md (features)
- Source files

**Tools Available:**
- Read all project files
- Write markdown files
- Update existing docs

**Instructions:**
- Keep docs concise and actionable
- Include code examples
- Update when features change
- Follow existing doc style

**Trigger:**
```
@docs-agent, document the {feature} API
@docs-agent, update README with setup instructions
@docs-agent, add JSDoc comments to {file}
```

---

### @devops-agent

**Purpose:** Handles deployment, CI/CD, infrastructure

**Context Provided:**
- CLAUDE.md (tech stack)
- Deployment configs
- Environment requirements

**Tools Available:**
- Docker operations
- CI/CD configuration
- Environment management
- Deploy commands

**Instructions:**
- Never expose secrets
- Test locally before deploying
- Document infrastructure changes
- Keep configs in version control

**Trigger:**
```
@devops-agent, set up Docker for this project
@devops-agent, configure GitHub Actions CI
@devops-agent, deploy to {environment}
```

---

### @review-agent

**Purpose:** Code review, security audit, performance analysis

**Context Provided:**
- CLAUDE.md (conventions)
- Source files to review
- Best practices

**Tools Available:**
- Read all code
- Run static analysis
- Check for patterns

**Instructions:**
- Flag security issues as critical
- Suggest, don't demand
- Explain the "why" behind feedback
- Prioritize issues by impact

**Trigger:**
```
@review-agent, review {file} for issues
@review-agent, security audit on auth system
@review-agent, performance review of {component}
```

---

## Project-Specific Agents

{project_specific_agents}

---

## Agent Coordination

### When to Use Multiple Agents

```
Feature development workflow:
1. @code-agent builds the feature
2. @test-agent writes tests
3. @docs-agent documents it
4. @review-agent checks quality
```

### Handing Off Between Agents

Each agent updates CLAUDE.md with what they did, so the next agent has context.

---

## Adding New Agents

To add a project-specific agent:

1. Define its purpose
2. Specify its context needs
3. List its tools
4. Write its instructions
5. Add trigger examples

---
<!-- METADATA -->
<!--
  buildsensei_version: {version}
  agents_count: {agent_count}
  project_type: {project_type}
-->
</template>

<project_specific_template>
### @{agent_name}-agent

**Purpose:** {purpose}

**Context Provided:**
{context_list}

**Tools Available:**
{tools_list}

**Instructions:**
{instructions_list}

**Trigger:**
```
@{agent_name}-agent, {example_trigger}
```
</project_specific_template>

<generation_notes>
## Generation Notes

agents.md is generated at milestone completion because:
1. By then, we know what kind of project this is
2. We can suggest relevant specialized agents
3. The core agents are always included

Project-specific agents are suggested based on:
- Tech stack (React → design-agent, API → api-agent)
- Project type (SaaS → billing-agent, e-commerce → inventory-agent)
- Patterns discovered during build
</generation_notes>

</agents-md-template>
